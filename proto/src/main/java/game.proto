syntax = "proto3";
option java_outer_classname = "GameProto";

package proto;

import "const.proto";

//请求加入桌子
message ReqEnterTable {
    int64 tableId = 1;
    bytes head = 2;
    bytes nick = 3;
}

//加入桌子回复
message AckEnterTable {
    repeated Player players = 1;
    TableInfo tableInfo = 2;
}

//请求离开桌子
message ReqLeaveTable {
    bytes tableId = 1;
}

//离开桌子回复
message AckLeaveTable {
    repeated Player players = 1;
    TableInfo tableInfo = 2;
}

//发牌
message NotCard{
    repeated NCardsInfo nCards = 1;
}

//通知操作
message NotOperation{
    int32 wait = 1;//操作等待时间
    int32 opSeat = 2;//操作玩家位置
    repeated OpInfo choice = 3;//选择 叫地主
}

//通知桌子状态
message NotTableState{
    int32 state = 1;//桌子状态
    int64 stateStart = 2;//状态开始时间
    int32 stateDuration = 3;//状态持续时间(s)
}

//请求操作
message ReqOp {
    OpInfo op = 1;
}

//操作回复
message AckOp {
    OpInfo op = 1;
    int32 opId = 2;//操作玩家id
    int32 opFrom = 3;//来源id
}

//通知结果
message NotResult{
    int32 winner = 1;
    repeated RPlayer rPlayers = 2;
}

message OpInfo{
    Operation choice = 1;
    repeated CardInfo opCards = 2;
}

message TableInfo{
    int32 roomId = 1;
    int64 tableId = 2;
    int32 landlord = 3;
    CardInfo lastCard = 4;//上一次出的牌
}

message Player{
    int32 roleId = 1;
    int32 position = 2;
    bytes avatar = 3;
    bytes nickName = 4;
    repeated Card cards = 5;
}

//结果玩家
message RPlayer{
    int32 roleId = 1;
    repeated Card cards = 5;
}

message CardInfo{
    repeated Card cards = 1;
    CardType type = 2;
}
message Card{
    int32 value = 1;
    int32 replace = 2;
}

message NCardsInfo{
    int32 roleId = 1;
    repeated Card cards = 2;//自己才有值其他人的牌都是牌值都是0
}
